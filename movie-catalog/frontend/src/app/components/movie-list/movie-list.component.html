<div class="movie-container">
    <h2>Список фильмов</h2>
    
    <div *ngIf="isLoading" class="loading">Загрузка...</div>
    
    <div *ngIf="!isLoading && movies.length === 0" class="no-movies">
      Фильмы не найдены
    </div>
  
    <div class="movie-grid">
      <mat-card *ngFor="let movie of movies" class="movie-card">
        <!-- Добавляем постер -->
        <img mat-card-image 
             [src]="movie.poster_url || 'assets/no-poster.jpg'" 
             alt="Постер фильма {{movie.title}}"
             class="movie-poster"
             *ngIf="movie.poster_url || showDefaultPoster">
             
        <mat-card-header>
          <mat-card-title>{{ movie.title }}</mat-card-title>
          <mat-card-subtitle>
            {{ movie.year }} · {{ movie.duration }} · {{ movie.genre }}
          </mat-card-subtitle>
        </mat-card-header>
        
        <mat-card-content>
          <p>{{ movie.description }}</p>
          <p><strong>Режиссер:</strong> {{ movie.director }}</p>
        </mat-card-content>
        
        <mat-card-actions *ngIf="showActions">
          <button mat-button color="primary" 
                  [routerLink]="['/movie', movie.id]"
                  *ngIf="movie.id">
            Подробнее
          </button>
          
          <button mat-icon-button 
                  (click)="toggleFavorite(movie.id)"
                  *ngIf="isAuthenticated() && movie.id"
                  [color]="isFavorite(movie.id) ? 'warn' : ''">
            <mat-icon>{{ isFavorite(movie.id) ? 'favorite' : 'favorite_border' }}</mat-icon>
          </button>
          
          <button mat-button color="warn" 
                  (click)="deleteMovie(movie.id)"
                  *ngIf="movie.id">
            Удалить
          </button>
        </mat-card-actions>
      </mat-card>
    </div>
</div>